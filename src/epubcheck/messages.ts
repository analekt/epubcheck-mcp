/**
 * EPUBCheck error code explanations
 * Based on https://www.w3.org/publishing/epubcheck/docs/messages/
 */

interface ErrorExplanation {
  code: string;
  category: string;
  description: string;
  severity: string;
  suggestion?: string;
}

const ERROR_EXPLANATIONS: Record<string, ErrorExplanation> = {
  // Accessibility errors
  ACC_001: {
    code: "ACC-001",
    category: "Accessibility",
    description: "EPUB content document does not have a page list",
    severity: "USAGE",
    suggestion: "Add a page-list nav element for print replica EPUBs",
  },
  ACC_002: {
    code: "ACC-002",
    category: "Accessibility",
    description: "EPUB content document has no landmarks",
    severity: "USAGE",
    suggestion: "Add a landmarks nav element to help navigation",
  },
  ACC_003: {
    code: "ACC-003",
    category: "Accessibility",
    description: "Non-decorative images should have an alt attribute",
    severity: "WARNING",
    suggestion: "Add descriptive alt text to images",
  },
  ACC_004: {
    code: "ACC-004",
    category: "Accessibility",
    description: "HTML table has no headers",
    severity: "USAGE",
    suggestion: "Add th elements or headers attribute to table cells",
  },
  ACC_005: {
    code: "ACC-005",
    category: "Accessibility",
    description: "Table has no accessibility summary",
    severity: "USAGE",
    suggestion: "Add a caption or summary to describe the table",
  },
  ACC_006: {
    code: "ACC-006",
    category: "Accessibility",
    description: "Complex table with no headers attribute",
    severity: "USAGE",
    suggestion: "Use headers and id attributes to associate cells",
  },
  ACC_007: {
    code: "ACC-007",
    category: "Accessibility",
    description: "Content document has no epub:type semantic",
    severity: "USAGE",
    suggestion: "Add epub:type attributes to identify content structure",
  },
  ACC_008: {
    code: "ACC-008",
    category: "Accessibility",
    description: "Missing audio/video alternative",
    severity: "USAGE",
    suggestion: "Provide transcripts or captions for media",
  },
  ACC_009: {
    code: "ACC-009",
    category: "Accessibility",
    description: "MathML has no alternative text",
    severity: "WARNING",
    suggestion: "Add alttext attribute to math elements",
  },
  ACC_010: {
    code: "ACC-010",
    category: "Accessibility",
    description: "Heading hierarchy is not sequential",
    severity: "USAGE",
    suggestion: "Use h1-h6 in proper sequential order",
  },
  ACC_011: {
    code: "ACC-011",
    category: "Accessibility",
    description: "Content document has no title",
    severity: "WARNING",
    suggestion: "Add a title element to the head",
  },
  ACC_013: {
    code: "ACC-013",
    category: "Accessibility",
    description: "Inline style declarations found",
    severity: "USAGE",
    suggestion: "Move styles to CSS files for better maintainability",
  },
  ACC_014: {
    code: "ACC-014",
    category: "Accessibility",
    description: "Missing accessibility metadata",
    severity: "USAGE",
    suggestion: "Add schema:accessibilityFeature and related metadata",
  },
  ACC_015: {
    code: "ACC-015",
    category: "Accessibility",
    description: "Missing accessMode metadata",
    severity: "USAGE",
    suggestion: "Add schema:accessMode to describe content access modes",
  },
  ACC_016: {
    code: "ACC-016",
    category: "Accessibility",
    description: "Missing accessibilityFeature metadata",
    severity: "USAGE",
    suggestion: "Add schema:accessibilityFeature to describe features",
  },
  ACC_017: {
    code: "ACC-017",
    category: "Accessibility",
    description: "Missing accessibilityHazard metadata",
    severity: "USAGE",
    suggestion: "Add schema:accessibilityHazard to warn about hazards",
  },

  // CSS errors
  CSS_001: {
    code: "CSS-001",
    category: "CSS",
    description: "CSS file could not be parsed",
    severity: "ERROR",
    suggestion: "Check CSS syntax for errors",
  },
  CSS_002: {
    code: "CSS-002",
    category: "CSS",
    description: "Empty or blank CSS file",
    severity: "WARNING",
    suggestion: "Remove empty CSS files or add styles",
  },
  CSS_003: {
    code: "CSS-003",
    category: "CSS",
    description: "CSS property is not valid",
    severity: "WARNING",
    suggestion: "Use valid CSS properties",
  },
  CSS_004: {
    code: "CSS-004",
    category: "CSS",
    description: "CSS selector is not valid",
    severity: "WARNING",
    suggestion: "Check CSS selector syntax",
  },
  CSS_005: {
    code: "CSS-005",
    category: "CSS",
    description: "CSS unit is not valid",
    severity: "WARNING",
    suggestion: "Use valid CSS units (px, em, rem, etc.)",
  },
  CSS_006: {
    code: "CSS-006",
    category: "CSS",
    description: "CSS property value is not valid",
    severity: "WARNING",
    suggestion: "Check the value is appropriate for the property",
  },
  CSS_007: {
    code: "CSS-007",
    category: "CSS",
    description: "Font is not embedded",
    severity: "INFO",
    suggestion: "Embed fonts for consistent rendering",
  },
  CSS_008: {
    code: "CSS-008",
    category: "CSS",
    description: "Namespace prefix not declared",
    severity: "ERROR",
    suggestion: "Declare the namespace before using the prefix",
  },

  // HTML/XHTML errors
  HTM_001: {
    code: "HTM-001",
    category: "HTML",
    description: "HTML parsing error",
    severity: "ERROR",
    suggestion: "Fix the HTML syntax error",
  },
  HTM_003: {
    code: "HTM-003",
    category: "HTML",
    description: "External stylesheet reference",
    severity: "ERROR",
    suggestion: "Include stylesheets within the EPUB package",
  },
  HTM_004: {
    code: "HTM-004",
    category: "HTML",
    description: "Irregular DOCTYPE declaration",
    severity: "WARNING",
    suggestion: "Use the correct DOCTYPE for EPUB content",
  },
  HTM_005: {
    code: "HTM-005",
    category: "HTML",
    description: "Invalid entity reference",
    severity: "ERROR",
    suggestion: "Use valid HTML entities or numeric character references",
  },
  HTM_006: {
    code: "HTM-006",
    category: "HTML",
    description: "Element is not allowed in this context",
    severity: "ERROR",
    suggestion: "Use the element in the correct context",
  },
  HTM_007: {
    code: "HTM-007",
    category: "HTML",
    description: "Element is obsolete",
    severity: "WARNING",
    suggestion: "Replace with modern HTML5 equivalent",
  },
  HTM_008: {
    code: "HTM-008",
    category: "HTML",
    description: "Attribute is not allowed",
    severity: "ERROR",
    suggestion: "Remove the invalid attribute",
  },
  HTM_009: {
    code: "HTM-009",
    category: "HTML",
    description: "Attribute value is invalid",
    severity: "ERROR",
    suggestion: "Use a valid value for this attribute",
  },
  HTM_010: {
    code: "HTM-010",
    category: "HTML",
    description: "Namespace mismatch",
    severity: "ERROR",
    suggestion: "Ensure correct namespace declaration",
  },
  HTM_011: {
    code: "HTM-011",
    category: "HTML",
    description: "Invalid ID value",
    severity: "ERROR",
    suggestion: "Use valid characters for ID attributes",
  },
  HTM_012: {
    code: "HTM-012",
    category: "HTML",
    description: "Duplicate ID",
    severity: "ERROR",
    suggestion: "Make ID values unique within the document",
  },
  HTM_013: {
    code: "HTM-013",
    category: "HTML",
    description: "Invalid language tag",
    severity: "WARNING",
    suggestion: "Use a valid BCP 47 language tag",
  },
  HTM_014: {
    code: "HTM-014",
    category: "HTML",
    description: "Invalid hyperlink",
    severity: "WARNING",
    suggestion: "Check the href value is a valid URL or path",
  },
  HTM_015: {
    code: "HTM-015",
    category: "HTML",
    description: "Required attribute missing",
    severity: "ERROR",
    suggestion: "Add the required attribute to the element",
  },
  HTM_017: {
    code: "HTM-017",
    category: "HTML",
    description: "Character encoding issue",
    severity: "ERROR",
    suggestion: "Use UTF-8 encoding consistently",
  },
  HTM_018: {
    code: "HTM-018",
    category: "HTML",
    description: "Uncommon character",
    severity: "INFO",
    suggestion: "Verify the character is intentional",
  },
  HTM_019: {
    code: "HTM-019",
    category: "HTML",
    description: "lang attribute not set",
    severity: "WARNING",
    suggestion: "Add lang attribute to html element",
  },
  HTM_020: {
    code: "HTM-020",
    category: "HTML",
    description: "Unresolved internal reference",
    severity: "ERROR",
    suggestion: "Check the ID reference exists in the document",
  },
  HTM_021: {
    code: "HTM-021",
    category: "HTML",
    description: "Fragment identifier not found",
    severity: "ERROR",
    suggestion: "Verify the fragment exists in the target document",
  },
  HTM_022: {
    code: "HTM-022",
    category: "HTML",
    description: "Meta refresh is not allowed",
    severity: "ERROR",
    suggestion: "Remove meta refresh; use proper navigation instead",
  },
  HTM_023: {
    code: "HTM-023",
    category: "HTML",
    description: "Hyperlink crosses reading order",
    severity: "WARNING",
    suggestion: "Consider the impact on reading flow",
  },
  HTM_024: {
    code: "HTM-024",
    category: "HTML",
    description: "Invalid link type",
    severity: "WARNING",
    suggestion: "Use a valid link relationship type",
  },
  HTM_025: {
    code: "HTM-025",
    category: "HTML",
    description: "Non-SVG element in SVG content",
    severity: "ERROR",
    suggestion: "Only SVG elements are allowed in SVG documents",
  },
  HTM_027: {
    code: "HTM-027",
    category: "HTML",
    description: "Deprecated or obsolete element/attribute",
    severity: "WARNING",
    suggestion: "Use modern HTML5 alternatives",
  },
  HTM_033: {
    code: "HTM-033",
    category: "HTML",
    description: "Head element missing",
    severity: "ERROR",
    suggestion: "Add a head element to the document",
  },
  HTM_036: {
    code: "HTM-036",
    category: "HTML",
    description: "Incorrect namespace for XML",
    severity: "ERROR",
    suggestion: "Use correct xmlns declaration",
  },
  HTM_038: {
    code: "HTM-038",
    category: "HTML",
    description: "IFrame not allowed in EPUB",
    severity: "ERROR",
    suggestion: "Remove iframe elements; embed content directly",
  },
  HTM_044: {
    code: "HTM-044",
    category: "HTML",
    description: "Namespace prefix not bound",
    severity: "ERROR",
    suggestion: "Declare the namespace prefix before using it",
  },
  HTM_045: {
    code: "HTM-045",
    category: "HTML",
    description: "Data URL used",
    severity: "INFO",
    suggestion: "Consider using separate files for large resources",
  },
  HTM_046: {
    code: "HTM-046",
    category: "HTML",
    description: "Fixed layout with scrolling content",
    severity: "WARNING",
    suggestion: "Review if content fits the viewport",
  },
  HTM_047: {
    code: "HTM-047",
    category: "HTML",
    description: "Remote resource reference",
    severity: "ERROR",
    suggestion: "Include resources within the EPUB package",
  },
  HTM_048: {
    code: "HTM-048",
    category: "HTML",
    description: "SVG hyperlink to non-SVG",
    severity: "WARNING",
    suggestion: "Verify the link target is appropriate",
  },
  HTM_049: {
    code: "HTM-049",
    category: "HTML",
    description: "Hyperlink creates unreachable content",
    severity: "WARNING",
    suggestion: "Ensure all content is reachable via spine",
  },
  HTM_050: {
    code: "HTM-050",
    category: "HTML",
    description: "EPUB CFI invalid",
    severity: "ERROR",
    suggestion: "Check the CFI syntax",
  },
  HTM_051: {
    code: "HTM-051",
    category: "HTML",
    description: "Anchor element missing href",
    severity: "WARNING",
    suggestion: "Add href to anchor elements used for linking",
  },
  HTM_052: {
    code: "HTM-052",
    category: "HTML",
    description: "Base element not allowed",
    severity: "ERROR",
    suggestion: "Remove base element; use absolute paths instead",
  },

  // Media Overlay errors
  MED_001: {
    code: "MED-001",
    category: "Media Overlay",
    description: "Media overlay error",
    severity: "ERROR",
    suggestion: "Check the SMIL structure",
  },
  MED_002: {
    code: "MED-002",
    category: "Media Overlay",
    description: "Invalid media overlay timing",
    severity: "ERROR",
    suggestion: "Fix the timing values in the overlay",
  },
  MED_003: {
    code: "MED-003",
    category: "Media Overlay",
    description: "Media overlay references missing file",
    severity: "ERROR",
    suggestion: "Add the referenced audio file",
  },
  MED_004: {
    code: "MED-004",
    category: "Media Overlay",
    description: "Media overlay text reference invalid",
    severity: "ERROR",
    suggestion: "Fix the text reference in the overlay",
  },
  MED_005: {
    code: "MED-005",
    category: "Media Overlay",
    description: "Media clip timing overlap",
    severity: "WARNING",
    suggestion: "Adjust clip timing to avoid overlaps",
  },
  MED_006: {
    code: "MED-006",
    category: "Media Overlay",
    description: "Media overlay total duration mismatch",
    severity: "WARNING",
    suggestion: "Update meta element with correct duration",
  },
  MED_007: {
    code: "MED-007",
    category: "Media Overlay",
    description: "SMIL clock value invalid",
    severity: "ERROR",
    suggestion: "Use valid SMIL timing syntax",
  },
  MED_008: {
    code: "MED-008",
    category: "Media Overlay",
    description: "Media type mismatch",
    severity: "ERROR",
    suggestion: "Ensure audio file matches declared media type",
  },
  MED_009: {
    code: "MED-009",
    category: "Media Overlay",
    description: "No audio in media overlay",
    severity: "WARNING",
    suggestion: "Add audio references to the overlay",
  },
  MED_010: {
    code: "MED-010",
    category: "Media Overlay",
    description: "Media overlay missing from manifest",
    severity: "ERROR",
    suggestion: "Add the SMIL file to the OPF manifest",
  },
  MED_011: {
    code: "MED-011",
    category: "Media Overlay",
    description: "Media overlay spine order mismatch",
    severity: "WARNING",
    suggestion: "Align overlay order with spine order",
  },
  MED_012: {
    code: "MED-012",
    category: "Media Overlay",
    description: "Text reference fragment not found",
    severity: "ERROR",
    suggestion: "Verify the text fragment ID exists",
  },
  MED_013: {
    code: "MED-013",
    category: "Media Overlay",
    description: "Invalid escapable attribute",
    severity: "WARNING",
    suggestion: "Use valid epub:type values for escapable",
  },
  MED_014: {
    code: "MED-014",
    category: "Media Overlay",
    description: "Narrator element present",
    severity: "INFO",
    suggestion: "Narrator metadata is informational",
  },
  MED_015: {
    code: "MED-015",
    category: "Media Overlay",
    description: "Negative timing value",
    severity: "ERROR",
    suggestion: "Use positive timing values",
  },

  // Navigation errors (EPUB 2 NCX)
  NCX_001: {
    code: "NCX-001",
    category: "Navigation (NCX)",
    description: "NCX parsing error",
    severity: "ERROR",
    suggestion: "Check NCX file syntax",
  },
  NCX_002: {
    code: "NCX-002",
    category: "Navigation (NCX)",
    description: "NCX content reference invalid",
    severity: "ERROR",
    suggestion: "Fix the content reference in NCX",
  },
  NCX_003: {
    code: "NCX-003",
    category: "Navigation (NCX)",
    description: "NCX navPoint structure invalid",
    severity: "ERROR",
    suggestion: "Check navPoint nesting and structure",
  },
  NCX_004: {
    code: "NCX-004",
    category: "Navigation (NCX)",
    description: "NCX pageList not sequential",
    severity: "WARNING",
    suggestion: "Ensure page numbers are in order",
  },
  NCX_005: {
    code: "NCX-005",
    category: "Navigation (NCX)",
    description: "NCX docTitle missing",
    severity: "WARNING",
    suggestion: "Add docTitle to NCX",
  },
  NCX_006: {
    code: "NCX-006",
    category: "Navigation (NCX)",
    description: "NCX navLabel missing text",
    severity: "ERROR",
    suggestion: "Add text content to navLabel",
  },

  // Navigation errors (EPUB 3 Nav)
  NAV_001: {
    code: "NAV-001",
    category: "Navigation",
    description: "Navigation document not found",
    severity: "ERROR",
    suggestion: "Create a nav document with epub:type='toc'",
  },
  NAV_002: {
    code: "NAV-002",
    category: "Navigation",
    description: "Navigation reference invalid",
    severity: "ERROR",
    suggestion: "Fix the href in the nav element",
  },
  NAV_003: {
    code: "NAV-003",
    category: "Navigation",
    description: "Navigation order does not match spine",
    severity: "WARNING",
    suggestion: "Align nav order with spine reading order",
  },
  NAV_004: {
    code: "NAV-004",
    category: "Navigation",
    description: "Navigation element is empty",
    severity: "ERROR",
    suggestion: "Add navigation items to the nav element",
  },
  NAV_005: {
    code: "NAV-005",
    category: "Navigation",
    description: "Multiple toc nav elements",
    severity: "ERROR",
    suggestion: "Only one nav with epub:type='toc' is allowed",
  },
  NAV_006: {
    code: "NAV-006",
    category: "Navigation",
    description: "Page list not in page order",
    severity: "WARNING",
    suggestion: "Ensure page-list is in ascending order",
  },
  NAV_007: {
    code: "NAV-007",
    category: "Navigation",
    description: "Heading hierarchy issue in nav",
    severity: "WARNING",
    suggestion: "Use proper heading levels in navigation",
  },
  NAV_008: {
    code: "NAV-008",
    category: "Navigation",
    description: "Landmarks nav has unknown landmark type",
    severity: "USAGE",
    suggestion: "Use standard epub:type values for landmarks",
  },
  NAV_009: {
    code: "NAV-009",
    category: "Navigation",
    description: "TOC refers to itself",
    severity: "ERROR",
    suggestion: "Remove self-referencing links from TOC",
  },
  NAV_010: {
    code: "NAV-010",
    category: "Navigation",
    description: "Hidden nav attribute misuse",
    severity: "WARNING",
    suggestion: "Only use hidden attribute appropriately",
  },
  NAV_011: {
    code: "NAV-011",
    category: "Navigation",
    description: "Nav element missing epub:type",
    severity: "ERROR",
    suggestion: "Add epub:type to identify nav purpose",
  },

  // OPF (Package) errors
  OPF_001: {
    code: "OPF-001",
    category: "Package",
    description: "OPF parsing error",
    severity: "ERROR",
    suggestion: "Check OPF file XML syntax",
  },
  OPF_002: {
    code: "OPF-002",
    category: "Package",
    description: "Manifest item missing",
    severity: "ERROR",
    suggestion: "Add the file to the OPF manifest",
  },
  OPF_003: {
    code: "OPF-003",
    category: "Package",
    description: "Manifest item references missing file",
    severity: "ERROR",
    suggestion: "Add the missing file or remove the manifest entry",
  },
  OPF_004: {
    code: "OPF-004",
    category: "Package",
    description: "Spine itemref references unknown ID",
    severity: "ERROR",
    suggestion: "Fix the idref to match a manifest item",
  },
  OPF_005: {
    code: "OPF-005",
    category: "Package",
    description: "Cover image not found",
    severity: "WARNING",
    suggestion: "Add a cover image to the manifest",
  },
  OPF_006: {
    code: "OPF-006",
    category: "Package",
    description: "Spine is empty",
    severity: "ERROR",
    suggestion: "Add at least one itemref to the spine",
  },
  OPF_007: {
    code: "OPF-007",
    category: "Package",
    description: "Duplicate manifest ID",
    severity: "ERROR",
    suggestion: "Make manifest item IDs unique",
  },
  OPF_008: {
    code: "OPF-008",
    category: "Package",
    description: "Spine item not valid content type",
    severity: "ERROR",
    suggestion: "Only XHTML/SVG documents can be in spine",
  },
  OPF_009: {
    code: "OPF-009",
    category: "Package",
    description: "Duplicate spine item",
    severity: "WARNING",
    suggestion: "Remove duplicate spine itemref",
  },
  OPF_010: {
    code: "OPF-010",
    category: "Package",
    description: "Invalid attribute value",
    severity: "ERROR",
    suggestion: "Use valid values for OPF attributes",
  },
  OPF_011: {
    code: "OPF-011",
    category: "Package",
    description: "Invalid media type",
    severity: "WARNING",
    suggestion: "Use a valid MIME type",
  },
  OPF_012: {
    code: "OPF-012",
    category: "Package",
    description: "Manifest item not referenced",
    severity: "USAGE",
    suggestion: "Remove unused items or add references",
  },
  OPF_013: {
    code: "OPF-013",
    category: "Package",
    description: "Manifest item href is invalid",
    severity: "ERROR",
    suggestion: "Fix the href path",
  },
  OPF_014: {
    code: "OPF-014",
    category: "Package",
    description: "Missing dc:identifier",
    severity: "ERROR",
    suggestion: "Add a unique identifier to metadata",
  },
  OPF_015: {
    code: "OPF-015",
    category: "Package",
    description: "Missing dc:title",
    severity: "ERROR",
    suggestion: "Add a title to metadata",
  },
  OPF_016: {
    code: "OPF-016",
    category: "Package",
    description: "Missing dc:language",
    severity: "ERROR",
    suggestion: "Add a language code to metadata",
  },
  OPF_017: {
    code: "OPF-017",
    category: "Package",
    description: "Missing modified date",
    severity: "WARNING",
    suggestion: "Add dcterms:modified to metadata",
  },
  OPF_018: {
    code: "OPF-018",
    category: "Package",
    description: "Invalid date format",
    severity: "ERROR",
    suggestion: "Use ISO 8601 date format (YYYY-MM-DD)",
  },
  OPF_019: {
    code: "OPF-019",
    category: "Package",
    description: "Spine toc attribute references invalid NCX",
    severity: "ERROR",
    suggestion: "Fix the toc reference to point to NCX",
  },
  OPF_020: {
    code: "OPF-020",
    category: "Package",
    description: "Required properties missing",
    severity: "ERROR",
    suggestion: "Add required properties to manifest item",
  },
  OPF_021: {
    code: "OPF-021",
    category: "Package",
    description: "Unknown property value",
    severity: "WARNING",
    suggestion: "Use standard property values",
  },
  OPF_025: {
    code: "OPF-025",
    category: "Package",
    description: "Legacy guide element deprecated",
    severity: "USAGE",
    suggestion: "Use landmarks nav instead",
  },
  OPF_026: {
    code: "OPF-026",
    category: "Package",
    description: "Guide reference type invalid",
    severity: "WARNING",
    suggestion: "Use valid guide reference types",
  },
  OPF_027: {
    code: "OPF-027",
    category: "Package",
    description: "Guide reference not in spine",
    severity: "WARNING",
    suggestion: "Add referenced file to spine",
  },
  OPF_028: {
    code: "OPF-028",
    category: "Package",
    description: "Invalid dc: element",
    severity: "ERROR",
    suggestion: "Use valid Dublin Core elements",
  },
  OPF_029: {
    code: "OPF-029",
    category: "Package",
    description: "Deprecated meta name-content",
    severity: "USAGE",
    suggestion: "Use meta property syntax instead",
  },
  OPF_030: {
    code: "OPF-030",
    category: "Package",
    description: "Unique identifier not found",
    severity: "ERROR",
    suggestion: "Ensure unique-identifier matches a dc:identifier id",
  },
  OPF_031: {
    code: "OPF-031",
    category: "Package",
    description: "Unexpected file in EPUB",
    severity: "WARNING",
    suggestion: "Add file to manifest or remove it",
  },
  OPF_032: {
    code: "OPF-032",
    category: "Package",
    description: "Unknown bindings media type",
    severity: "WARNING",
    suggestion: "Use a supported media type for bindings",
  },
  OPF_033: {
    code: "OPF-033",
    category: "Package",
    description: "Binding handler not scripted",
    severity: "ERROR",
    suggestion: "Mark handler as scripted in manifest",
  },
  OPF_034: {
    code: "OPF-034",
    category: "Package",
    description: "Binding media type duplicate",
    severity: "ERROR",
    suggestion: "Only one binding per media type",
  },
  OPF_035: {
    code: "OPF-035",
    category: "Package",
    description: "Media overlay without duration",
    severity: "ERROR",
    suggestion: "Add duration metadata for media overlay",
  },
  OPF_036: {
    code: "OPF-036",
    category: "Package",
    description: "Total duration mismatch",
    severity: "WARNING",
    suggestion: "Update total duration to match sum",
  },
  OPF_037: {
    code: "OPF-037",
    category: "Package",
    description: "Narrator metadata missing",
    severity: "INFO",
    suggestion: "Consider adding narrator metadata",
  },
  OPF_038: {
    code: "OPF-038",
    category: "Package",
    description: "Active class for media overlay missing",
    severity: "USAGE",
    suggestion: "Add media:active-class property",
  },
  OPF_039: {
    code: "OPF-039",
    category: "Package",
    description: "Media overlay item missing",
    severity: "ERROR",
    suggestion: "Add media-overlay attribute to spine item",
  },
  OPF_040: {
    code: "OPF-040",
    category: "Package",
    description: "Fallback chain is circular",
    severity: "ERROR",
    suggestion: "Remove circular fallback references",
  },
  OPF_041: {
    code: "OPF-041",
    category: "Package",
    description: "Fallback for content doc not found",
    severity: "ERROR",
    suggestion: "Add valid fallback for content document",
  },
  OPF_042: {
    code: "OPF-042",
    category: "Package",
    description: "Fallback not needed",
    severity: "USAGE",
    suggestion: "Core media types don't need fallbacks",
  },
  OPF_043: {
    code: "OPF-043",
    category: "Package",
    description: "Non-linear item in spine",
    severity: "INFO",
    suggestion: "Non-linear items are supplementary content",
  },
  OPF_044: {
    code: "OPF-044",
    category: "Package",
    description: "Fallback properties issue",
    severity: "WARNING",
    suggestion: "Fallback should preserve required properties",
  },
  OPF_045: {
    code: "OPF-045",
    category: "Package",
    description: "DC element refinement issue",
    severity: "WARNING",
    suggestion: "Check meta refines syntax",
  },
  OPF_046: {
    code: "OPF-046",
    category: "Package",
    description: "Refines target not found",
    severity: "ERROR",
    suggestion: "Ensure refines points to valid ID",
  },
  OPF_047: {
    code: "OPF-047",
    category: "Package",
    description: "Remote resource not allowed",
    severity: "ERROR",
    suggestion: "Include resources within the EPUB",
  },
  OPF_048: {
    code: "OPF-048",
    category: "Package",
    description: "Rendition metadata issue",
    severity: "WARNING",
    suggestion: "Use valid rendition property values",
  },
  OPF_049: {
    code: "OPF-049",
    category: "Package",
    description: "Spine override rendition conflict",
    severity: "WARNING",
    suggestion: "Resolve conflicting rendition properties",
  },
  OPF_050: {
    code: "OPF-050",
    category: "Package",
    description: "epub:type value unknown",
    severity: "USAGE",
    suggestion: "Use standard structural semantics",
  },
  OPF_051: {
    code: "OPF-051",
    category: "Package",
    description: "Navigation document not in spine",
    severity: "WARNING",
    suggestion: "Consider adding nav to spine as hidden",
  },
  OPF_052: {
    code: "OPF-052",
    category: "Package",
    description: "EPUB Version mismatch",
    severity: "ERROR",
    suggestion: "Ensure content matches declared version",
  },
  OPF_053: {
    code: "OPF-053",
    category: "Package",
    description: "Missing dc: prefix",
    severity: "ERROR",
    suggestion: "Declare Dublin Core namespace prefix",
  },
  OPF_054: {
    code: "OPF-054",
    category: "Package",
    description: "Date type deprecated",
    severity: "WARNING",
    suggestion: "Use dcterms:modified instead",
  },
  OPF_055: {
    code: "OPF-055",
    category: "Package",
    description: "Manifest has no content documents",
    severity: "ERROR",
    suggestion: "Add XHTML content documents",
  },
  OPF_056: {
    code: "OPF-056",
    category: "Package",
    description: "Collection role unknown",
    severity: "WARNING",
    suggestion: "Use standard collection roles",
  },
  OPF_057: {
    code: "OPF-057",
    category: "Package",
    description: "Collection metadata issue",
    severity: "WARNING",
    suggestion: "Check collection metadata syntax",
  },
  OPF_058: {
    code: "OPF-058",
    category: "Package",
    description: "Collection link not in manifest",
    severity: "ERROR",
    suggestion: "Add linked resource to manifest",
  },
  OPF_059: {
    code: "OPF-059",
    category: "Package",
    description: "External identifier in DC metadata",
    severity: "USAGE",
    suggestion: "Use local identifiers in metadata",
  },
  OPF_060: {
    code: "OPF-060",
    category: "Package",
    description: "Manifest path contains special characters",
    severity: "WARNING",
    suggestion: "Use URL-safe characters in file paths",
  },
  OPF_061: {
    code: "OPF-061",
    category: "Package",
    description: "No fallback for foreign content",
    severity: "ERROR",
    suggestion: "Add core media type fallback",
  },
  OPF_062: {
    code: "OPF-062",
    category: "Package",
    description: "Page progression direction issue",
    severity: "WARNING",
    suggestion: "Set appropriate page-progression-direction",
  },
  OPF_063: {
    code: "OPF-063",
    category: "Package",
    description: "Missing epub prefix declaration",
    severity: "ERROR",
    suggestion: "Add epub prefix to package element",
  },
  OPF_064: {
    code: "OPF-064",
    category: "Package",
    description: "Prefix already declared",
    severity: "ERROR",
    suggestion: "Remove duplicate prefix declaration",
  },
  OPF_065: {
    code: "OPF-065",
    category: "Package",
    description: "Unknown prefix",
    severity: "ERROR",
    suggestion: "Declare prefix before use",
  },
  OPF_066: {
    code: "OPF-066",
    category: "Package",
    description: "Prefix syntax invalid",
    severity: "ERROR",
    suggestion: "Use correct prefix declaration syntax",
  },
  OPF_067: {
    code: "OPF-067",
    category: "Package",
    description: "IRI value invalid",
    severity: "ERROR",
    suggestion: "Use valid IRI syntax",
  },
  OPF_068: {
    code: "OPF-068",
    category: "Package",
    description: "Unknown metadata element",
    severity: "WARNING",
    suggestion: "Use standard metadata elements",
  },
  OPF_069: {
    code: "OPF-069",
    category: "Package",
    description: "Metadata refines scheme issue",
    severity: "WARNING",
    suggestion: "Check scheme syntax for refines",
  },
  OPF_070: {
    code: "OPF-070",
    category: "Package",
    description: "Empty link relationship",
    severity: "WARNING",
    suggestion: "Specify rel attribute for link",
  },
  OPF_071: {
    code: "OPF-071",
    category: "Package",
    description: "Link properties invalid",
    severity: "WARNING",
    suggestion: "Use valid link properties",
  },
  OPF_072: {
    code: "OPF-072",
    category: "Package",
    description: "Link href missing",
    severity: "ERROR",
    suggestion: "Add href to link element",
  },
  OPF_073: {
    code: "OPF-073",
    category: "Package",
    description: "External identifier in DC metadata",
    severity: "USAGE",
    suggestion: "Use local identifiers when possible",
  },
  OPF_074: {
    code: "OPF-074",
    category: "Package",
    description: "Duplicate manifest href",
    severity: "ERROR",
    suggestion: "Each manifest item must have unique href",
  },
  OPF_075: {
    code: "OPF-075",
    category: "Package",
    description: "Remote font resource",
    severity: "WARNING",
    suggestion: "Consider embedding fonts in EPUB",
  },
  OPF_076: {
    code: "OPF-076",
    category: "Package",
    description: "Remote resource needs remote-resources property",
    severity: "ERROR",
    suggestion: "Add remote-resources to spine item properties",
  },
  OPF_077: {
    code: "OPF-077",
    category: "Package",
    description: "Data navigation file not allowed",
    severity: "ERROR",
    suggestion: "Use XHTML for navigation documents",
  },
  OPF_078: {
    code: "OPF-078",
    category: "Package",
    description: "Cover image not valid type",
    severity: "WARNING",
    suggestion: "Use JPEG, PNG, GIF, or SVG for cover",
  },
  OPF_079: {
    code: "OPF-079",
    category: "Package",
    description: "Multiple nav documents",
    severity: "ERROR",
    suggestion: "Only one navigation document is allowed",
  },
  OPF_080: {
    code: "OPF-080",
    category: "Package",
    description: "Metadata language mismatch",
    severity: "WARNING",
    suggestion: "Ensure language consistency in metadata",
  },
  OPF_081: {
    code: "OPF-081",
    category: "Package",
    description: "Spine linear attribute deprecated",
    severity: "USAGE",
    suggestion: "Use reading-order instead in EPUB 3.3",
  },
  OPF_082: {
    code: "OPF-082",
    category: "Package",
    description: "Pagination direction conflicts",
    severity: "WARNING",
    suggestion: "Align CSS direction with page-progression",
  },
  OPF_083: {
    code: "OPF-083",
    category: "Package",
    description: "Fixed layout viewport missing",
    severity: "WARNING",
    suggestion: "Add viewport meta to fixed layout pages",
  },
  OPF_084: {
    code: "OPF-084",
    category: "Package",
    description: "Fixed layout dimensions inconsistent",
    severity: "WARNING",
    suggestion: "Use consistent viewport dimensions",
  },
  OPF_085: {
    code: "OPF-085",
    category: "Package",
    description: "Scripted content without fallback",
    severity: "ERROR",
    suggestion: "Provide fallback for scripted content",
  },
  OPF_086: {
    code: "OPF-086",
    category: "Package",
    description: "Switch fallback structure issue",
    severity: "ERROR",
    suggestion: "Check epub:switch element structure",
  },
  OPF_087: {
    code: "OPF-087",
    category: "Package",
    description: "Multiple cover images",
    severity: "WARNING",
    suggestion: "Use only one cover image",
  },
  OPF_088: {
    code: "OPF-088",
    category: "Package",
    description: "Schema.org accessibility metadata recommended",
    severity: "USAGE",
    suggestion: "Add accessibility metadata for compliance",
  },
  OPF_089: {
    code: "OPF-089",
    category: "Package",
    description: "Accessibility summary missing",
    severity: "USAGE",
    suggestion: "Add schema:accessibilitySummary",
  },
  OPF_090: {
    code: "OPF-090",
    category: "Package",
    description: "Accessibility conformance unknown",
    severity: "USAGE",
    suggestion: "Add dcterms:conformsTo for WCAG level",
  },
  OPF_091: {
    code: "OPF-091",
    category: "Package",
    description: "Certifier metadata missing",
    severity: "INFO",
    suggestion: "Add a]1y certifier information",
  },
  OPF_092: {
    code: "OPF-092",
    category: "Package",
    description: "Certifier credential missing",
    severity: "INFO",
    suggestion: "Add certifier credential if certified",
  },
  OPF_093: {
    code: "OPF-093",
    category: "Package",
    description: "Certifier report missing",
    severity: "INFO",
    suggestion: "Link to certification report if available",
  },

  // Package structure errors
  PKG_001: {
    code: "PKG-001",
    category: "Package Structure",
    description: "File could not be read",
    severity: "FATAL",
    suggestion: "Check file exists and is readable",
  },
  PKG_003: {
    code: "PKG-003",
    category: "Package Structure",
    description: "File name contains special characters",
    severity: "WARNING",
    suggestion: "Use ASCII characters in file names",
  },
  PKG_004: {
    code: "PKG-004",
    category: "Package Structure",
    description: "File is not a valid ZIP",
    severity: "FATAL",
    suggestion: "Ensure file is properly zipped",
  },
  PKG_005: {
    code: "PKG-005",
    category: "Package Structure",
    description: "Content is encrypted",
    severity: "INFO",
    suggestion: "Encrypted content cannot be fully validated",
  },
  PKG_006: {
    code: "PKG-006",
    category: "Package Structure",
    description: "Mimetype file missing or incorrect",
    severity: "ERROR",
    suggestion: "Add uncompressed mimetype as first file",
  },
  PKG_007: {
    code: "PKG-007",
    category: "Package Structure",
    description: "Mimetype file has extra field",
    severity: "WARNING",
    suggestion: "Remove extra fields from mimetype entry",
  },
  PKG_008: {
    code: "PKG-008",
    category: "Package Structure",
    description: "Mimetype entry is not first",
    severity: "ERROR",
    suggestion: "Make mimetype the first entry in ZIP",
  },
  PKG_009: {
    code: "PKG-009",
    category: "Package Structure",
    description: "Mimetype is compressed",
    severity: "ERROR",
    suggestion: "Store mimetype without compression",
  },
  PKG_010: {
    code: "PKG-010",
    category: "Package Structure",
    description: "Container.xml missing",
    severity: "ERROR",
    suggestion: "Add META-INF/container.xml",
  },
  PKG_011: {
    code: "PKG-011",
    category: "Package Structure",
    description: "Container.xml invalid",
    severity: "ERROR",
    suggestion: "Fix container.xml syntax",
  },
  PKG_012: {
    code: "PKG-012",
    category: "Package Structure",
    description: "OPF file not found at declared path",
    severity: "ERROR",
    suggestion: "Fix path in container.xml or add OPF file",
  },
  PKG_013: {
    code: "PKG-013",
    category: "Package Structure",
    description: "Multiple OPF files",
    severity: "WARNING",
    suggestion: "Use single OPF or declare all in container.xml",
  },
  PKG_014: {
    code: "PKG-014",
    category: "Package Structure",
    description: "Unexpected files in META-INF",
    severity: "WARNING",
    suggestion: "Only standard files should be in META-INF",
  },
  PKG_015: {
    code: "PKG-015",
    category: "Package Structure",
    description: "File path contains directory traversal",
    severity: "FATAL",
    suggestion: "Remove ../ from file paths",
  },
  PKG_016: {
    code: "PKG-016",
    category: "Package Structure",
    description: "File path starts with /",
    severity: "ERROR",
    suggestion: "Use relative paths without leading slash",
  },
  PKG_017: {
    code: "PKG-017",
    category: "Package Structure",
    description: "Duplicate file path",
    severity: "ERROR",
    suggestion: "Remove duplicate files",
  },
  PKG_018: {
    code: "PKG-018",
    category: "Package Structure",
    description: "Encryption.xml invalid",
    severity: "ERROR",
    suggestion: "Fix encryption.xml syntax",
  },
  PKG_020: {
    code: "PKG-020",
    category: "Package Structure",
    description: "Obfuscation method unknown",
    severity: "WARNING",
    suggestion: "Use standard obfuscation method",
  },
  PKG_021: {
    code: "PKG-021",
    category: "Package Structure",
    description: "Signature not valid",
    severity: "WARNING",
    suggestion: "Check signature validity",
  },
  PKG_022: {
    code: "PKG-022",
    category: "Package Structure",
    description: "Rights.xml invalid",
    severity: "WARNING",
    suggestion: "Fix rights.xml if DRM is used",
  },
  PKG_023: {
    code: "PKG-023",
    category: "Package Structure",
    description: "File extension mismatch",
    severity: "WARNING",
    suggestion: "Use appropriate extension for file type",
  },
  PKG_024: {
    code: "PKG-024",
    category: "Package Structure",
    description: "ZIP64 used",
    severity: "INFO",
    suggestion: "ZIP64 may not be supported by all readers",
  },
  PKG_025: {
    code: "PKG-025",
    category: "Package Structure",
    description: "Empty directory",
    severity: "INFO",
    suggestion: "Remove empty directories if not needed",
  },

  // Resource errors
  RSC_001: {
    code: "RSC-001",
    category: "Resource",
    description: "File could not be read",
    severity: "ERROR",
    suggestion: "Check file exists and is accessible",
  },
  RSC_002: {
    code: "RSC-002",
    category: "Resource",
    description: "Resource not declared in manifest",
    severity: "ERROR",
    suggestion: "Add resource to OPF manifest",
  },
  RSC_003: {
    code: "RSC-003",
    category: "Resource",
    description: "Manifest declares non-existent file",
    severity: "ERROR",
    suggestion: "Add missing file or remove manifest entry",
  },
  RSC_004: {
    code: "RSC-004",
    category: "Resource",
    description: "File not in OEBPS directory",
    severity: "USAGE",
    suggestion: "Organize content in standard directory",
  },
  RSC_005: {
    code: "RSC-005",
    category: "Resource",
    description: "Resource reference not found",
    severity: "ERROR",
    suggestion: "Fix the reference or add missing resource",
  },
  RSC_006: {
    code: "RSC-006",
    category: "Resource",
    description: "Remote resource reference",
    severity: "WARNING",
    suggestion: "Include resources locally when possible",
  },
  RSC_007: {
    code: "RSC-007",
    category: "Resource",
    description: "Referenced resource has wrong media type",
    severity: "WARNING",
    suggestion: "Use correct media type in manifest",
  },
  RSC_008: {
    code: "RSC-008",
    category: "Resource",
    description: "Resource declared but not used",
    severity: "USAGE",
    suggestion: "Remove unused resources or add references",
  },
  RSC_009: {
    code: "RSC-009",
    category: "Resource",
    description: "Image could not be decoded",
    severity: "ERROR",
    suggestion: "Check image file is not corrupt",
  },
  RSC_010: {
    code: "RSC-010",
    category: "Resource",
    description: "Reference to non-standard resource",
    severity: "USAGE",
    suggestion: "Use core media types when possible",
  },
  RSC_011: {
    code: "RSC-011",
    category: "Resource",
    description: "Fragment identifier error",
    severity: "ERROR",
    suggestion: "Check fragment exists in target file",
  },
  RSC_012: {
    code: "RSC-012",
    category: "Resource",
    description: "Resource reference contains query string",
    severity: "WARNING",
    suggestion: "Remove query string from resource reference",
  },
  RSC_013: {
    code: "RSC-013",
    category: "Resource",
    description: "Hyperlink fragment invalid",
    severity: "WARNING",
    suggestion: "Verify fragment identifier syntax",
  },
  RSC_014: {
    code: "RSC-014",
    category: "Resource",
    description: "Fragment identifier used on binary resource",
    severity: "WARNING",
    suggestion: "Fragments only apply to text resources",
  },
  RSC_015: {
    code: "RSC-015",
    category: "Resource",
    description: "Reference to non-EPUB resource",
    severity: "INFO",
    suggestion: "Link to external resources only when necessary",
  },
  RSC_016: {
    code: "RSC-016",
    category: "Resource",
    description: "Font not embedded",
    severity: "INFO",
    suggestion: "Embed fonts for consistent rendering",
  },
  RSC_017: {
    code: "RSC-017",
    category: "Resource",
    description: "Font obfuscation issue",
    severity: "WARNING",
    suggestion: "Check font obfuscation settings",
  },
  RSC_018: {
    code: "RSC-018",
    category: "Resource",
    description: "Core media type fallback missing",
    severity: "ERROR",
    suggestion: "Add fallback for non-core media type",
  },
  RSC_019: {
    code: "RSC-019",
    category: "Resource",
    description: "Fallback loops",
    severity: "ERROR",
    suggestion: "Remove circular fallback chain",
  },
  RSC_020: {
    code: "RSC-020",
    category: "Resource",
    description: "Fallback terminates without core type",
    severity: "ERROR",
    suggestion: "Fallback chain must end with core media type",
  },
  RSC_021: {
    code: "RSC-021",
    category: "Resource",
    description: "Media type and content mismatch",
    severity: "ERROR",
    suggestion: "Use correct media type for file content",
  },
  RSC_022: {
    code: "RSC-022",
    category: "Resource",
    description: "Referenced file empty",
    severity: "WARNING",
    suggestion: "Add content or remove reference",
  },
  RSC_023: {
    code: "RSC-023",
    category: "Resource",
    description: "SVG font face invalid",
    severity: "WARNING",
    suggestion: "Check SVG font-face syntax",
  },
  RSC_024: {
    code: "RSC-024",
    category: "Resource",
    description: "URL scheme not allowed",
    severity: "ERROR",
    suggestion: "Use http/https or relative URLs",
  },
  RSC_025: {
    code: "RSC-025",
    category: "Resource",
    description: "Unsupported resource",
    severity: "WARNING",
    suggestion: "Use EPUB-supported media types",
  },
  RSC_026: {
    code: "RSC-026",
    category: "Resource",
    description: "Unicode normalization issue",
    severity: "WARNING",
    suggestion: "Normalize Unicode in file names and content",
  },
  RSC_027: {
    code: "RSC-027",
    category: "Resource",
    description: "IRI encoding issue",
    severity: "WARNING",
    suggestion: "Properly encode special characters in URIs",
  },
  RSC_028: {
    code: "RSC-028",
    category: "Resource",
    description: "Resource too large",
    severity: "WARNING",
    suggestion: "Consider splitting large resources",
  },
  RSC_029: {
    code: "RSC-029",
    category: "Resource",
    description: "Data URL too large",
    severity: "WARNING",
    suggestion: "Use separate files for large data URLs",
  },
  RSC_030: {
    code: "RSC-030",
    category: "Resource",
    description: "Image dimensions too large",
    severity: "WARNING",
    suggestion: "Optimize image dimensions for EPUB readers",
  },

  // Script errors
  SCP_001: {
    code: "SCP-001",
    category: "Scripting",
    description: "Scripts found in spine content",
    severity: "INFO",
    suggestion: "Mark scripted content with properties='scripted'",
  },
  SCP_002: {
    code: "SCP-002",
    category: "Scripting",
    description: "Inline script detected",
    severity: "INFO",
    suggestion: "Consider using external script files",
  },
  SCP_003: {
    code: "SCP-003",
    category: "Scripting",
    description: "Event handler attribute used",
    severity: "INFO",
    suggestion: "Use addEventListener instead of inline handlers",
  },
  SCP_004: {
    code: "SCP-004",
    category: "Scripting",
    description: "JavaScript eval() used",
    severity: "WARNING",
    suggestion: "Avoid eval() for security reasons",
  },
  SCP_005: {
    code: "SCP-005",
    category: "Scripting",
    description: "Document.write used",
    severity: "WARNING",
    suggestion: "Use DOM manipulation instead",
  },
  SCP_006: {
    code: "SCP-006",
    category: "Scripting",
    description: "Script in container scope",
    severity: "WARNING",
    suggestion: "Scripts in spine content should be scoped",
  },
  SCP_007: {
    code: "SCP-007",
    category: "Scripting",
    description: "localStorage used",
    severity: "INFO",
    suggestion: "localStorage may not persist in all readers",
  },
  SCP_008: {
    code: "SCP-008",
    category: "Scripting",
    description: "XMLHttpRequest used",
    severity: "INFO",
    suggestion: "Network requests may be blocked",
  },
  SCP_009: {
    code: "SCP-009",
    category: "Scripting",
    description: "Scripted content needs fallback",
    severity: "ERROR",
    suggestion: "Provide non-scripted fallback content",
  },
  SCP_010: {
    code: "SCP-010",
    category: "Scripting",
    description: "Container-constrained script detected",
    severity: "INFO",
    suggestion: "Ensure script respects container boundaries",
  },
};

export function explainErrorCode(code: string): ErrorExplanation | null {
  // Normalize code format (ACC-001 -> ACC_001)
  const normalizedCode = code.replace("-", "_").toUpperCase();
  return ERROR_EXPLANATIONS[normalizedCode] || null;
}

export function getAllErrorCodes(): ErrorExplanation[] {
  return Object.values(ERROR_EXPLANATIONS);
}

export function getErrorCodesByCategory(category: string): ErrorExplanation[] {
  return Object.values(ERROR_EXPLANATIONS).filter(
    (e) => e.category.toLowerCase() === category.toLowerCase()
  );
}
